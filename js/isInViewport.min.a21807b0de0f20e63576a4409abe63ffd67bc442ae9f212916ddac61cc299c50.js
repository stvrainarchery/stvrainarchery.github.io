function isInViewport(element,options){var boundingRect=element.getBoundingClientRect();var top=boundingRect.top;var bottom=boundingRect.bottom;var left=boundingRect.left;var right=boundingRect.right;var settings=options||{};var isVisibleFlag=false;var $viewport=settings.viewport||window;var $viewportHeight=document.documentElement.clientHeight;var $viewportWidth=document.documentElement.clientWidth;var typeofViewport=window.toString();settings.tolerance=settings.tolerance||0;if($viewport[0]!==window&&typeofViewport!=='[object Window]'&&typeofViewport!=='[object DOMWindow]'){var viewportRect=window.getBoundingClientRect();top=top-viewportRect.top;bottom=bottom-viewportRect.top;left=left-viewportRect.left;right=left+$viewportWidth;isInViewport.scrollBarWidth=isInViewport.scrollBarWidth||getScrollbarWidth($viewport);$viewportWidth-=isInViewport.scrollBarWidth;}
settings.tolerance=~~Math.round(parseFloat(settings.tolerance));if(settings.tolerance<0)
settings.tolerance=$viewportHeight+settings.tolerance;if(Math.abs(left)>=$viewportWidth)
return isVisibleFlag;isVisibleFlag=settings.tolerance?!!(top<=settings.tolerance&&bottom>=settings.tolerance):!!(bottom>0&&top<=$viewportHeight);return isVisibleFlag;}